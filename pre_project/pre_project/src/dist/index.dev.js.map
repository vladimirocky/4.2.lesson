{"version":3,"sources":["index.js"],"names":["totalPrice","cart","products","product","name","count","renderItem","price","renderPage","document","querySelectorAll","forEach","el","addEventListener","event","target","getAttribute"],"mappings":";;AACA;;AAEA;;;;;;;;;;AAEA,IAAIA,UAAU,GAAG,CAAjB;AACA,IAAMC,IAAI,GAAG,EAAb;;;;;;AACA,uBAAoBC,uBAApB,8HAA8B;AAAA,QAArBC,OAAqB;AAC1BF,IAAAA,IAAI,CAACE,OAAO,CAACC,IAAT,CAAJ,qBAA0BD,OAA1B;AAAmCE,MAAAA,KAAK,EAAE;AAA1C;AACH,G,CACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAEA,SAASC,UAAT,OAA4C;AAAA,MAAtBF,IAAsB,QAAtBA,IAAsB;AAAA,MAAhBG,KAAgB,QAAhBA,KAAgB;AAAA,MAATF,KAAS,QAATA,KAAS;AACxC;AAEA,yIAKIE,KALJ,8YAQaF,KARb,0GAUqED,IAVrE,6BAU0FG,KAV1F,uJAcyDH,IAdzD,6BAc8EG,KAd9E;AAsBH;;AAED,SAASC,UAAT,GAAsB;AAClB;AAEA;AACA;AAJkB;AAAA;AAAA;;AAAA;AAKlB,0BAAoBN,uBAApB,mIAA8B;AAAA,UAArBC,OAAqB;AAC1B;AACAG,MAAAA,UAAU,CAACL,IAAI,CAACE,OAAO,CAACC,IAAT,CAAL,CAAV;AACH,KARiB,CASlB;;AATkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAWlB,4JAIWJ,UAJX,4CAXkB,CAqBlB;;AACAS,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,YAA1B,EAAwCC,OAAxC,CAAgD,UAACC,EAAD,EAAQ;AACpD;AACAA,IAAAA,EAAE,CAACC,gBAAH,CAAoB,OAApB,EAA6B,UAACC,KAAD,EAAW;AACpC;AAEA;AACA,UAAIV,IAAI,GAAGU,KAAK,CAACC,MAAN,CAAaC,YAAb,CAA0B,WAA1B,CAAX;AACA,UAAIT,KAAK,GAAG,CAACO,KAAK,CAACC,MAAN,CAAaC,YAAb,CAA0B,YAA1B,CAAb,CALoC,CAMpC;;AACAhB,MAAAA,UAAU,IAAIO,KAAd,CAPoC,CAQpC;;AACAN,MAAAA,IAAI,CAACG,IAAD,CAAJ,CAAWC,KAAX,IAAoB,CAApB,CAToC,CAUpC;;AACAG,MAAAA,UAAU;AACb,KAZD;AAaH,GAfD;AAiBAC,EAAAA,QAAQ,CAACC,gBAAT,CAA0B,eAA1B,EAA2CC,OAA3C,CAAmD,UAACC,EAAD,EAAQ;AACzDA,IAAAA,EAAE,CAACC,gBAAH,CAAoB,OAApB,EAA6B,UAACC,KAAD,EAAW;AACtC,UAAIV,IAAI,GAAGU,KAAK,CAACC,MAAN,CAAaC,YAAb,CAA0B,WAA1B,CAAX;AACA,UAAIT,KAAK,GAAGO,KAAK,CAACC,MAAN,CAAaC,YAAb,CAA0B,YAA1B,CAAZ;AAEAhB,MAAAA,UAAU,IAAIO,KAAd;;AACA,UAAIP,UAAU,GAAG,CAAjB,EAAoB;AAClBA,QAAAA,UAAU,GAAG,CAAb;AACD;;AAEDC,MAAAA,IAAI,CAACG,IAAD,CAAJ,CAAWC,KAAX,IAAoB,CAApB;;AACA,UAAIJ,IAAI,CAACG,IAAD,CAAJ,CAAWC,KAAX,GAAmB,CAAvB,EAA0B;AACxBJ,QAAAA,IAAI,CAACG,IAAD,CAAJ,CAAWC,KAAX,GAAmB,CAAnB;AACD;;AACDG,MAAAA,UAAU;AACX,KAdD;AAeD,GAhBD;AAiBH;;AAEDA,UAAU","sourcesContent":["// импортируем список продуктов из модуля\r\nimport products from \"./data_module\";\r\n// импортирует полезные функции\r\nimport { addHtml, clearHtml } from \"./utils\";\r\n\r\nlet totalPrice = 0;\r\nconst cart = {};\r\nfor (let product of products) {\r\n    cart[product.name] = { ...product, count: 0 };\r\n}\r\n// после цикла cart будет содержать:\r\n// {\r\n//   \"Котлета\": {\r\n//     name: \"Котлета\",\r\n//     price: 1290,\r\n//     count: 0\r\n//   },\r\n//   ...\r\n// }\r\n// при чем оригинальный объект продукта останется прежним\r\n\r\nfunction renderItem({ name, price, count }) {\r\n    // добавляет на страницу верстку для одного продукта\r\n\r\n    addHtml(`\r\n    <div class=\"p-3 mb-2 bg-secondary text-white\">\r\n\r\n    <p class=\"text-center fw-bold\">\r\n\r\n    [ ${price} руб <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-cash\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"/>\r\n    <path d=\"M0 4a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V4zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V6a2 2 0 0 1-2-2H3z\"/>\r\n    </svg> ] - ${count} шт\r\n\r\n    <button class=\"addTocart btn btn-warning\" id=\"saasTest\" data-name=\"${name}\" data-price=\"${price}\">\r\n    Добавить\r\n    </button>\r\n\r\n    <button class=\"removeTocart btn btn-danger\" data-name=\"${name}\" data-price=\"${price}\">\r\n    Удалить\r\n    </button>\r\n\r\n    </p>\r\n\r\n    </div>\r\n  `);\r\n}\r\n\r\nfunction renderPage() {\r\n    // создает верстку страницы\r\n\r\n    // очищаем все\r\n    clearHtml();\r\n    for (let product of products) {\r\n        // добавляем по одному продукты из списка\r\n        renderItem(cart[product.name]);\r\n    }\r\n    // добавляем в конце итог\r\n    \r\n    addHtml(`<div class=\"p-3 mb-2 bg-success text-white\">\r\n\r\n    <p class=\"text-center fw-bold\">\r\n\r\n      Итог : ${totalPrice} </img>\r\n    </p>\r\n\r\n    </div>\r\n    `);\r\n\r\n    // выбирает все кнопки по классу addTocart\r\n    document.querySelectorAll(\".addTocart\").forEach((el) => {\r\n        // навешиваем им событие на \"клик\"\r\n        el.addEventListener(\"click\", (event) => {\r\n            // ЭТА ФУНКЦИЯ ВЫЗЫВАЕТСЯ ТОЛЬКО ПРИ КЛИКЕ\r\n\r\n            // достаем из атрибутов значение свойств\r\n            let name = event.target.getAttribute(\"data-name\");\r\n            let price = +event.target.getAttribute(\"data-price\");\r\n            // увеличиваем итог\r\n            totalPrice += price;\r\n            // увеличиваем количество в тележке\r\n            cart[name].count += 1;\r\n            // перерисовываем страницу\r\n            renderPage();\r\n        });\r\n    });\r\n\r\n    document.querySelectorAll(\".removeTocart\").forEach((el) => {\r\n      el.addEventListener(\"click\", (event) => {\r\n        let name = event.target.getAttribute(\"data-name\");\r\n        let price = event.target.getAttribute(\"data-price\");\r\n  \r\n        totalPrice -= price;\r\n        if (totalPrice < 0) {\r\n          totalPrice = 0;\r\n        }\r\n  \r\n        cart[name].count -= 1;\r\n        if (cart[name].count < 0) {\r\n          cart[name].count = 0;\r\n        }\r\n        renderPage();\r\n      });\r\n    });\r\n}\r\n\r\nrenderPage();\r\n"],"file":"index.dev.js"}