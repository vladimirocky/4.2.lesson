{"version":3,"sources":["index.js"],"names":["_data_module","_interopRequireDefault","require","_utils","totalPrice","cart","_step","_iterator","products","Symbol","iterator","_iteratorNormalCompletion","next","done","product","value","name","_objectSpread","count","renderItem","_ref","price","renderPage","clearHtml","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","undefined","_step2","_iterator2","err","addHtml","concat","document","forEach","el","event","target","getAttribute","querySelectorAll","addEventListener"],"mappings":"aACA,IAAAA,aAAAC,uBAAAC,QAAA,kBAEAC,OAAAD,QAAA,8yBAEA,IAAIE,WAAa,EACXC,KAAO,+EACb,IAAA,IAAAC,MAAAC,UAAoBC,aAAAA,QAApBC,OAAAC,cAAAC,2BAAAL,MAAAC,UAAAK,QAAAC,MAAAF,2BAAA,EAA8B,CAAA,IAArBG,QAAqBR,MAAAS,MAC1BV,KAAKS,QAAQE,MAAbC,cAAA,GAA0BH,QAA1B,CAAmCI,MAAO,yLAD9C,SAAAC,WAAAC,GAAoBZ,IAApBQ,EAAoBR,EAApBQ,KAAoBR,EAAAA,EAAAA,MAAAA,EAAAA,EAAAA,OACmBU,EAAAA,OAAAA,SAAAA,wGAAAA,OAKvCG,EALuCH,sWAAAA,OAQvCA,EARuCA,kFAAAA,OAUvCF,EAVuCE,kBAAAA,OAUvCG,EAVuCH,kGAAAA,OA8BsBF,EA9BtBE,kBAAAA,OA8B2CG,EA9B3CH,iEAwCvC,SAASI,cA3BT,EAAAnB,OAAAoB,aA2BsB,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IA3BsB,IAAA,IAAAC,EAAAC,EAAArB,aAAAA,QAAAC,OAAAC,cAAAc,GAAAI,EAAAC,EAAAjB,QAAAC,MAAAW,GAAA,EAAA,CAAA,IAAAV,EAAAc,EAAAb,MAATG,WAAAA,KAASJ,EAAAE,QA2BtB,MAAAc,GAAAL,GAAA,EAAAC,EAAAI,EAAA,QAAA,IAAAN,GAAA,MAAAK,EAAA,QAAAA,EAAA,SAAA,QAAA,GAAAJ,EAAA,MAAAC,IAWlB,EAAAvB,OAAA4B,SAAA,uGAAAC,OAPA5B,WAOA,0CAN8B6B,SAArBnB,iBAAqB,cAAAoB,QAAA,SAAAC,GAE1BhB,EAAAA,iBAAgBL,QAAhB,SAAAsB,GAPc,IAAApB,EAAAoB,EAAAC,OAAAC,aAAA,aAAAjB,GAAAe,EAAAC,OAAAC,aAAA,cAAAlC,YAAAiB,EAAAhB,KAAAW,GAAAE,OAAA,EAAAI,iBAAAW,SAAAM,iBAAA,iBAAAL,QAAA,SAAAC,GAAAA,EAAAK,iBAAA,QAAA,SAAAJ,GAyCd,IAAIpB,EAAOoB,EAAMC,OAAOC,aAAa,aA9BzCjB,EAAAe,EAAAC,OAAAC,aAAA,eAWAL,YAASM,GACL,IACGC,WAAH,GAIInC,KAAIW,GAAOoB,OAAMC,EACbhB,KAAKL,GAAIoB,MAAA,IAsBf/B,KAAKW,GAAME,MAAQ,GAErBI,iBAhBHA","file":"index.min.js","sourcesContent":["// импортируем список продуктов из модуля\r\nimport products from \"./data_module\";\r\n// импортирует полезные функции\r\nimport { addHtml, clearHtml } from \"./utils\";\r\n\r\nlet totalPrice = 0;\r\nconst cart = {};\r\nfor (let product of products) {\r\n    cart[product.name] = { ...product, count: 0 };\r\n}\r\n// после цикла cart будет содержать:\r\n// {\r\n//   \"Котлета\": {\r\n//     name: \"Котлета\",\r\n//     price: 1290,\r\n//     count: 0\r\n//   },\r\n//   ...\r\n// }\r\n// при чем оригинальный объект продукта останется прежним\r\n\r\nfunction renderItem({ name, price, count }) {\r\n    // добавляет на страницу верстку для одного продукта\r\n\r\n    addHtml(`\r\n    <div class=\"p-3 mb-2 bg-secondary text-white\">\r\n\r\n    <p class=\"text-center fw-bold\">\r\n\r\n    [ ${price} руб <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-cash\" viewBox=\"0 0 16 16\">\r\n    <path d=\"M8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4z\"/>\r\n    <path d=\"M0 4a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V4zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V6a2 2 0 0 1-2-2H3z\"/>\r\n    </svg> ] - ${count} шт\r\n\r\n    <button class=\"addTocart btn btn-warning\" id=\"saasTest\" data-name=\"${name}\" data-price=\"${price}\">\r\n    Добавить\r\n    </button>\r\n\r\n    <button class=\"removeTocart btn btn-danger\" data-name=\"${name}\" data-price=\"${price}\">\r\n    Удалить\r\n    </button>\r\n\r\n    </p>\r\n\r\n    </div>\r\n  `);\r\n}\r\n\r\nfunction renderPage() {\r\n    // создает верстку страницы\r\n\r\n    // очищаем все\r\n    clearHtml();\r\n    for (let product of products) {\r\n        // добавляем по одному продукты из списка\r\n        renderItem(cart[product.name]);\r\n    }\r\n    // добавляем в конце итог\r\n    \r\n    addHtml(`<div class=\"p-3 mb-2 bg-success text-white\">\r\n\r\n    <p class=\"text-center fw-bold\">\r\n\r\n      Итог : ${totalPrice} </img>\r\n    </p>\r\n\r\n    </div>\r\n    `);\r\n\r\n    // выбирает все кнопки по классу addTocart\r\n    document.querySelectorAll(\".addTocart\").forEach((el) => {\r\n        // навешиваем им событие на \"клик\"\r\n        el.addEventListener(\"click\", (event) => {\r\n            // ЭТА ФУНКЦИЯ ВЫЗЫВАЕТСЯ ТОЛЬКО ПРИ КЛИКЕ\r\n\r\n            // достаем из атрибутов значение свойств\r\n            let name = event.target.getAttribute(\"data-name\");\r\n            let price = +event.target.getAttribute(\"data-price\");\r\n            // увеличиваем итог\r\n            totalPrice += price;\r\n            // увеличиваем количество в тележке\r\n            cart[name].count += 1;\r\n            // перерисовываем страницу\r\n            renderPage();\r\n        });\r\n    });\r\n\r\n    document.querySelectorAll(\".removeTocart\").forEach((el) => {\r\n      el.addEventListener(\"click\", (event) => {\r\n        let name = event.target.getAttribute(\"data-name\");\r\n        let price = event.target.getAttribute(\"data-price\");\r\n  \r\n        totalPrice -= price;\r\n        if (totalPrice < 0) {\r\n          totalPrice = 0;\r\n        }\r\n  \r\n        cart[name].count -= 1;\r\n        if (cart[name].count < 0) {\r\n          cart[name].count = 0;\r\n        }\r\n        renderPage();\r\n      });\r\n    });\r\n}\r\n\r\nrenderPage();\r\n"]}